{"ast":null,"code":"import { createMachine, ref } from '@zag-js/core';\nimport { createProps } from '@zag-js/types';\n\n// src/presence.connect.ts\nfunction connect(state, send, _normalize) {\n  const present = state.matches(\"mounted\", \"unmountSuspended\");\n  return {\n    skip: !state.context.initial && present,\n    present,\n    setNode(node) {\n      if (!node) return;\n      send({\n        type: \"NODE.SET\",\n        node\n      });\n    },\n    unmount() {\n      send({\n        type: \"UNMOUNT\"\n      });\n    }\n  };\n}\nfunction getAnimationName(styles) {\n  return styles?.animationName || \"none\";\n}\nfunction machine(ctx) {\n  return createMachine({\n    initial: ctx.present ? \"mounted\" : \"unmounted\",\n    context: {\n      node: null,\n      styles: null,\n      unmountAnimationName: null,\n      prevAnimationName: null,\n      present: false,\n      initial: false,\n      ...ctx\n    },\n    exit: [\"clearInitial\"],\n    watch: {\n      present: [\"setInitial\", \"syncPresence\"]\n    },\n    on: {\n      \"NODE.SET\": {\n        actions: [\"setNode\", \"setStyles\"]\n      }\n    },\n    states: {\n      mounted: {\n        on: {\n          UNMOUNT: {\n            target: \"unmounted\",\n            actions: [\"invokeOnExitComplete\"]\n          },\n          \"UNMOUNT.SUSPEND\": \"unmountSuspended\"\n        }\n      },\n      unmountSuspended: {\n        activities: [\"trackAnimationEvents\"],\n        on: {\n          MOUNT: {\n            target: \"mounted\",\n            actions: [\"setPrevAnimationName\"]\n          },\n          \"ANIMATION.END\": {\n            target: \"unmounted\",\n            actions: [\"invokeOnExitComplete\"]\n          },\n          UNMOUNT: {\n            target: \"unmounted\",\n            actions: [\"invokeOnExitComplete\"]\n          }\n        }\n      },\n      unmounted: {\n        entry: [\"clearPrevAnimationName\"],\n        on: {\n          MOUNT: {\n            target: \"mounted\",\n            actions: [\"setPrevAnimationName\"]\n          }\n        }\n      }\n    }\n  }, {\n    actions: {\n      setInitial(ctx2) {\n        ctx2.initial = true;\n      },\n      clearInitial(ctx2) {\n        ctx2.initial = false;\n      },\n      invokeOnExitComplete(ctx2) {\n        ctx2.onExitComplete?.();\n      },\n      setNode(ctx2, evt) {\n        ctx2.node = ref(evt.node);\n      },\n      setStyles(ctx2, evt) {\n        const win = evt.node.ownerDocument.defaultView || window;\n        ctx2.styles = ref(win.getComputedStyle(evt.node));\n      },\n      syncPresence(ctx2, _evt, {\n        send\n      }) {\n        if (ctx2.present) {\n          send({\n            type: \"MOUNT\",\n            src: \"presence.changed\"\n          });\n          return;\n        }\n        const animationName = getAnimationName(ctx2.styles);\n        const exec = ctx2.immediate ? queueMicrotask : requestAnimationFrame;\n        exec(() => {\n          ctx2.unmountAnimationName = animationName;\n          if (animationName === \"none\" || animationName === ctx2.prevAnimationName || ctx2.styles?.display === \"none\" || ctx2.styles?.animationDuration === \"0s\") {\n            send({\n              type: \"UNMOUNT\",\n              src: \"presence.changed\"\n            });\n          } else {\n            send({\n              type: \"UNMOUNT.SUSPEND\"\n            });\n          }\n        });\n      },\n      setPrevAnimationName(ctx2) {\n        const exec = ctx2.immediate ? queueMicrotask : requestAnimationFrame;\n        exec(() => {\n          ctx2.prevAnimationName = getAnimationName(ctx2.styles);\n        });\n      },\n      clearPrevAnimationName(ctx2) {\n        ctx2.prevAnimationName = null;\n      }\n    },\n    activities: {\n      trackAnimationEvents(ctx2, _evt, {\n        send\n      }) {\n        const node = ctx2.node;\n        if (!node) return;\n        const onStart = event => {\n          const target = event.composedPath?.()?.[0] ?? event.target;\n          if (target === node) {\n            ctx2.prevAnimationName = getAnimationName(ctx2.styles);\n          }\n        };\n        const onEnd = event => {\n          const animationName = getAnimationName(ctx2.styles);\n          const target = event.composedPath?.()?.[0] ?? event.target;\n          if (target === node && animationName === ctx2.unmountAnimationName) {\n            send({\n              type: \"UNMOUNT\",\n              src: \"animationend\"\n            });\n          }\n        };\n        node.addEventListener(\"animationstart\", onStart);\n        node.addEventListener(\"animationcancel\", onEnd);\n        node.addEventListener(\"animationend\", onEnd);\n        return () => {\n          node.removeEventListener(\"animationstart\", onStart);\n          node.removeEventListener(\"animationcancel\", onEnd);\n          node.removeEventListener(\"animationend\", onEnd);\n        };\n      }\n    }\n  });\n}\nvar props = createProps()([\"onExitComplete\", \"present\", \"immediate\"]);\nexport { connect, machine, props };","map":{"version":3,"names":["createMachine","ref","createProps","connect","state","send","_normalize","present","matches","skip","context","initial","setNode","node","type","unmount","getAnimationName","styles","animationName","machine","ctx","unmountAnimationName","prevAnimationName","exit","watch","on","actions","states","mounted","UNMOUNT","target","unmountSuspended","activities","MOUNT","unmounted","entry","setInitial","ctx2","clearInitial","invokeOnExitComplete","onExitComplete","evt","setStyles","win","ownerDocument","defaultView","window","getComputedStyle","syncPresence","_evt","src","exec","immediate","queueMicrotask","requestAnimationFrame","display","animationDuration","setPrevAnimationName","clearPrevAnimationName","trackAnimationEvents","onStart","event","composedPath","onEnd","addEventListener","removeEventListener","props"],"sources":["D:/assignment/e_commerce/ecommerce-product-page/node_modules/@zag-js/presence/dist/index.mjs"],"sourcesContent":["import { createMachine, ref } from '@zag-js/core';\nimport { createProps } from '@zag-js/types';\n\n// src/presence.connect.ts\nfunction connect(state, send, _normalize) {\n  const present = state.matches(\"mounted\", \"unmountSuspended\");\n  return {\n    skip: !state.context.initial && present,\n    present,\n    setNode(node) {\n      if (!node) return;\n      send({ type: \"NODE.SET\", node });\n    },\n    unmount() {\n      send({ type: \"UNMOUNT\" });\n    }\n  };\n}\nfunction getAnimationName(styles) {\n  return styles?.animationName || \"none\";\n}\nfunction machine(ctx) {\n  return createMachine(\n    {\n      initial: ctx.present ? \"mounted\" : \"unmounted\",\n      context: {\n        node: null,\n        styles: null,\n        unmountAnimationName: null,\n        prevAnimationName: null,\n        present: false,\n        initial: false,\n        ...ctx\n      },\n      exit: [\"clearInitial\"],\n      watch: {\n        present: [\"setInitial\", \"syncPresence\"]\n      },\n      on: {\n        \"NODE.SET\": {\n          actions: [\"setNode\", \"setStyles\"]\n        }\n      },\n      states: {\n        mounted: {\n          on: {\n            UNMOUNT: {\n              target: \"unmounted\",\n              actions: [\"invokeOnExitComplete\"]\n            },\n            \"UNMOUNT.SUSPEND\": \"unmountSuspended\"\n          }\n        },\n        unmountSuspended: {\n          activities: [\"trackAnimationEvents\"],\n          on: {\n            MOUNT: {\n              target: \"mounted\",\n              actions: [\"setPrevAnimationName\"]\n            },\n            \"ANIMATION.END\": {\n              target: \"unmounted\",\n              actions: [\"invokeOnExitComplete\"]\n            },\n            UNMOUNT: {\n              target: \"unmounted\",\n              actions: [\"invokeOnExitComplete\"]\n            }\n          }\n        },\n        unmounted: {\n          entry: [\"clearPrevAnimationName\"],\n          on: {\n            MOUNT: {\n              target: \"mounted\",\n              actions: [\"setPrevAnimationName\"]\n            }\n          }\n        }\n      }\n    },\n    {\n      actions: {\n        setInitial(ctx2) {\n          ctx2.initial = true;\n        },\n        clearInitial(ctx2) {\n          ctx2.initial = false;\n        },\n        invokeOnExitComplete(ctx2) {\n          ctx2.onExitComplete?.();\n        },\n        setNode(ctx2, evt) {\n          ctx2.node = ref(evt.node);\n        },\n        setStyles(ctx2, evt) {\n          const win = evt.node.ownerDocument.defaultView || window;\n          ctx2.styles = ref(win.getComputedStyle(evt.node));\n        },\n        syncPresence(ctx2, _evt, { send }) {\n          if (ctx2.present) {\n            send({ type: \"MOUNT\", src: \"presence.changed\" });\n            return;\n          }\n          const animationName = getAnimationName(ctx2.styles);\n          const exec = ctx2.immediate ? queueMicrotask : requestAnimationFrame;\n          exec(() => {\n            ctx2.unmountAnimationName = animationName;\n            if (animationName === \"none\" || animationName === ctx2.prevAnimationName || ctx2.styles?.display === \"none\" || ctx2.styles?.animationDuration === \"0s\") {\n              send({ type: \"UNMOUNT\", src: \"presence.changed\" });\n            } else {\n              send({ type: \"UNMOUNT.SUSPEND\" });\n            }\n          });\n        },\n        setPrevAnimationName(ctx2) {\n          const exec = ctx2.immediate ? queueMicrotask : requestAnimationFrame;\n          exec(() => {\n            ctx2.prevAnimationName = getAnimationName(ctx2.styles);\n          });\n        },\n        clearPrevAnimationName(ctx2) {\n          ctx2.prevAnimationName = null;\n        }\n      },\n      activities: {\n        trackAnimationEvents(ctx2, _evt, { send }) {\n          const node = ctx2.node;\n          if (!node) return;\n          const onStart = (event) => {\n            const target = event.composedPath?.()?.[0] ?? event.target;\n            if (target === node) {\n              ctx2.prevAnimationName = getAnimationName(ctx2.styles);\n            }\n          };\n          const onEnd = (event) => {\n            const animationName = getAnimationName(ctx2.styles);\n            const target = event.composedPath?.()?.[0] ?? event.target;\n            if (target === node && animationName === ctx2.unmountAnimationName) {\n              send({ type: \"UNMOUNT\", src: \"animationend\" });\n            }\n          };\n          node.addEventListener(\"animationstart\", onStart);\n          node.addEventListener(\"animationcancel\", onEnd);\n          node.addEventListener(\"animationend\", onEnd);\n          return () => {\n            node.removeEventListener(\"animationstart\", onStart);\n            node.removeEventListener(\"animationcancel\", onEnd);\n            node.removeEventListener(\"animationend\", onEnd);\n          };\n        }\n      }\n    }\n  );\n}\nvar props = createProps()([\"onExitComplete\", \"present\", \"immediate\"]);\n\nexport { connect, machine, props };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}